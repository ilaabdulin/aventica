import React, {useState, useContext} from 'react' 

import classes from './style.module.css'
import {GlobalContext} from 'context/globalContext'

export const Form = () => {
    let [value, setValue] = useState({
        text: ''
    });
    const draft = useContext(GlobalContext)

    const checkForm = (e , typeClick) => {
        e.preventDefault();
       
        if (value.text.trim()) {
            draft.addCard(value.text.trim(), typeClick)
            e.target.parentNode.firstChild.value = '';
            setValue({text: ''})
        } else {
            alert('введите название')
            setValue({text: ''})
        }
    }

    return (
        <form className = {classes.form}>
            <input type='text' className = {classes.input} onChange={e => value.text = e.target.value}/>
            <button 
                className = {classes.draft} name = 'draft' 
                onClick = {(event) => {checkForm(event, "draft")}}
            >Draft</button>
            <button 
                className = {classes.save} name = 'save' 
                onClick = {(event) => {checkForm(event, "save")}}
            >Save</button>
        </form>
    )
}