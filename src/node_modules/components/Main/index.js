import React, {useContext, useEffect} from 'react'

import classes from './style.module.css'
import {Card} from 'components/Main/Card'
import {GlobalContext} from 'context/globalContext'
import {Loader} from 'components/Loader'

export const Main = () => {
    const {loading, cards, fetchCards, removeCard, addCard, addMarker} = useContext(GlobalContext)

    useEffect(() => {
        fetchCards()
    }, [])

    return (
        <div className = {classes.main}>
            {
                loading ? <Loader/> : 
                <Card cards = {cards} 
                    onRemove = {removeCard} 
                    addCard = {addCard}
                    addMarker = {addMarker}
                />
            }
        </div>
    )
}